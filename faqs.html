<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SC Portal - Social Hub</title>

    <script src="https://unpkg.com/lucide@latest"></script>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  

    <style>
      /* --- 1. RESET & VARIABLES --- */
      :root {
        --primary: #4f46e5;
        --primary-hover: #4338ca;
        --bg-color: #f8fafc;
        --white: #ffffff;
        --text-main: #1e293b;
        --text-muted: #64748b;
        --border-color: #e2e8f0;
        --slate-50: #f8fafc;
        --slate-100: #f1f5f9;
        --indigo-100: #e0e7ff;
        --danger: #ef4444;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", system-ui, -apple-system, sans-serif;
        background-color: var(--bg-color);
        color: var(--text-main);
        height: 100vh;
        display: flex;
        overflow: hidden;
      }

      /* Custom Scrollbar */
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 4px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8;
      }

      /* --- 2. SIDEBAR NAVIGATION --- */
      .navbar {
        width: 60px;
        height: 100vh;
        background: var(--white);
        border-right: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
        transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 100;
        flex-shrink: 0;
        position: relative;
        overflow: hidden;
      }

      .navbar:hover {
        width: 260px;
      }

      .nav-collapsed-arrow {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: var(--text-muted);
        transition: opacity 0.2s, transform 0.3s;
        pointer-events: none;
      }
      .navbar:hover .nav-collapsed-arrow {
        opacity: 0;
        transform: translate(-50%, -50%) rotate(180deg);
      }

      .nav-expanded-content {
        opacity: 0;
        display: flex;
        flex-direction: column;
        width: 260px;
        height: 100%;
        padding: 20px;
        transition: opacity 0.2s ease-in;
        pointer-events: none;
      }
      .navbar:hover .nav-expanded-content {
        opacity: 1;
        pointer-events: auto;
        transition-delay: 0.1s;
      }

      .user-brand {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: var(--text-main);
        margin-bottom: 30px;
        cursor: pointer;
        white-space: nowrap;
      }
      .logo-icon {
        width: 40px;
        height: 40px;
        background: var(--primary);
        color: white;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }
      .user-name-nav {
        margin-left: 12px;
        font-weight: 700;
        font-size: 16px;
      }

      .nav-links-container {
        display: flex;
        flex-direction: column;
        gap: 6px;
        flex: 1;
        overflow-y: auto;
      }

      .nav-link {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: var(--text-muted);
        padding: 12px 15px;
        border-radius: 8px;
        transition: 0.2s;
        white-space: nowrap;
        font-size: 14px;
        font-weight: 500;
      }
      .nav-link i {
        min-width: 20px;
        height: 20px;
        margin-right: 12px;
      }
      .nav-link:hover {
        background-color: var(--indigo-100);
        color: var(--primary);
      }
      .nav-link.active {
        background-color: var(--indigo-100);
        color: var(--primary);
        font-weight: 700;
      }

      .divider {
        height: 1px;
        background-color: var(--border-color);
        margin: 8px 0;
      }

      /* --- 3. LAYOUT WRAPPERS --- */
      .content-wrapper {
        flex: 1;
        display: flex;
        flex-direction: column;
        height: 100%;
        overflow: hidden;
        position: relative;
      }

      /* Top Navbar (Search/Profile) */
      .top-bar {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(8px);
        border-bottom: 1px solid var(--border-color);
        height: 64px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 24px;
        flex-shrink: 0;
        z-index: 40;
      }

      .top-logo {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 18px;
        font-weight: 700;
        color: var(--text-main);
      }
      .icon-box {
        background: var(--primary);
        padding: 6px;
        border-radius: 6px;
        display: flex;
      }
      .icon-box i {
        color: white;
        width: 20px;
        height: 20px;
      }

      .top-profile {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .profile-text {
        text-align: right;
        display: none;
      }
      .profile-name {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-main);
      }
      .profile-role {
        font-size: 12px;
        color: var(--text-muted);
      }
      .profile-avatar {
        width: 36px;
        height: 36px;
        rounded: 50%;
        background: var(--indigo-100);
        border: 1px solid var(--border-color);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
      }

      @media (min-width: 640px) {
        .profile-text {
          display: block;
        }
      }

      /* Main Scroll Area */
      .main-scroll {
        flex: 1;
        overflow-y: auto;
        padding: 24px;
      }

      .container {
        max-width: 960px;
        margin: 0 auto;
      }

      /* --- 4. HERO SECTION --- */
      .hero-card {
        background-color: var(--primary);
        border-radius: 1.5rem;
        padding: 2rem;
        color: white;
        position: relative;
        overflow: hidden;
        box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.3);
        margin-bottom: 2rem;
      }

      /* Decorative Circles */
      .circle-1 {
        position: absolute;
        top: 0;
        right: 0;
        width: 16rem;
        height: 16rem;
        background: white;
        opacity: 0.05;
        border-radius: 50%;
        transform: translate(25%, -25%);
        filter: blur(40px);
      }
      .circle-2 {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 8rem;
        height: 8rem;
        background: white;
        opacity: 0.1;
        border-radius: 50%;
        transform: translate(-25%, 25%);
        filter: blur(24px);
      }

      .hero-content {
        position: relative;
        z-index: 10;
        max-width: 600px;
      }
      .hero-title {
        font-size: 1.875rem;
        font-weight: 700;
        margin-bottom: 0.75rem;
      }
      .hero-sub {
        color: #e0e7ff;
        margin-bottom: 2rem;
        font-size: 0.95rem;
        line-height: 1.5;
      }

      /* Search Input */
      .search-wrapper {
        position: relative;
      }
      .search-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #a5b4fc;
        width: 20px;
        height: 20px;
      }
      .hero-input {
        width: 100%;
        padding: 0.875rem 1rem 0.875rem 3rem;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 0.75rem;
        color: white;
        font-size: 1rem;
        outline: none;
        transition: 0.2s;
      }
      .hero-input::placeholder {
        color: #c7d2fe;
      }
      .hero-input:focus {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.4);
      }

      /* --- 5. FAQ LIST --- */
      #faq-list {
        display: grid;
        gap: 1.5rem;
      }

      .faq-card {
        background: var(--white);
        border-radius: 1rem;
        border: 1px solid var(--border-color);
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        overflow: hidden;
      }

      .faq-header {
        padding: 1rem 1.5rem;
        background: var(--slate-50);
        border-bottom: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }
      .faq-icon {
        color: var(--primary);
        width: 18px;
        height: 18px;
      }
      .faq-cat-title {
        font-weight: 600;
        color: #334155;
        font-size: 1rem;
      }

      /* Accordion Items */
      .faq-item {
        border-bottom: 1px solid var(--border-color);
      }
      .faq-item:last-child {
        border-bottom: none;
      }

      .faq-btn {
        width: 100%;
        padding: 1rem 1.5rem;
        text-align: left;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 1rem;
        background: transparent;
        border: none;
        cursor: pointer;
        transition: background 0.2s;
      }
      .faq-btn:hover {
        background: var(--slate-50);
      }

      .q-text {
        font-weight: 500;
        color: var(--text-main);
        font-size: 0.95rem;
        line-height: 1.4;
      }
      .q-chevron {
        color: #94a3b8;
        transition: transform 0.2s;
        width: 20px;
        height: 20px;
        flex-shrink: 0;
      }

      .faq-content {
        padding: 0 1.5rem;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        transition: all 0.3s ease-in-out;
      }

      /* Active State Classes (Toggled by JS) */
      .faq-item.active .q-chevron {
        transform: rotate(180deg);
        color: var(--text-main);
      }
      .faq-item.active .faq-content {
        max-height: 200px;
        opacity: 1;
        padding-bottom: 1.25rem;
      }

      .a-text {
        color: #475569;
        font-size: 0.9rem;
        line-height: 1.5;
        padding-left: 0.75rem;
        border-left: 2px solid #c7d2fe;
      }

      /* --- 6. UTILS --- */
      .hidden {
        display: none !important;
      }

      #empty-state {
        text-align: center;
        padding: 4rem 0;
      }
      .empty-icon {
        width: 64px;
        height: 64px;
        background: #f1f5f9;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem auto;
        color: #94a3b8;
      }
      .empty-title {
        font-size: 1.125rem;
        font-weight: 500;
        color: var(--text-main);
      }
      .empty-sub {
        color: var(--text-muted);
        font-size: 0.9rem;
        margin-top: 0.25rem;
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-collapsed-arrow">
        <i data-lucide="arrow-right" style="width: 24px; height: 24px"></i>
      </div>

      <div class="nav-expanded-content">
        <a href="profile.html" class="user-brand">
          <div class="logo-icon"><i data-lucide="user"></i></div>
          <span class="user-name-nav" id="nav-user-name">Loading...</span>
        </a>

        <div class="nav-links-container">
          <a href="index.html" class="nav-link">
            <i data-lucide="home"></i> Home
          </a>
          <a href="veddit.html" class="nav-link">
            <i data-lucide="message-circle"></i> Veddit
          </a>
          <a href="news.html" class="nav-link">
            <i data-lucide="newspaper"></i> Socio
          </a>
          <a href="calendram.html" class="nav-link">
            <i data-lucide="coffee"></i> Lounge
          </a>
          <a href="events.html" class="nav-link">
            <i data-lucide="ticket"></i> Campus Buzz
          </a>
          <a href="#" class="nav-link active">
            <i data-lucide="book-open"></i> Wiki / FAQ
          </a>

          <div class="divider"></div>

          <a href="index.html" class="nav-link" style="color: var(--danger)">
            <i data-lucide="log-out"></i> Exit App
          </a>
        </div>
      </div>
    </nav>

    <div class="content-wrapper">
      <main class="main-scroll custom-scrollbar">
        <div class="container">
          <div class="hero-card">
            <div class="circle-1"></div>
            <div class="circle-2"></div>

            <div class="hero-content">
              <h1 class="hero-title">College Wiki & FAQ</h1>
              <p class="hero-sub">
                Everything you need to know about campus life, academics, and
                administrative procedures in one place.
              </p>

              <div class="search-wrapper">
                <i data-lucide="search" class="search-icon"></i>
                <input
                  id="search-input"
                  type="text"
                  class="hero-input"
                  placeholder="Search for answers (e.g., 'exams', 'wifi')..."
                />
              </div>
            </div>
          </div>

          <div id="faq-list"></div>

          <div id="empty-state" class="hidden">
            <div class="empty-icon">
              <i data-lucide="search" style="width: 32px; height: 32px"></i>
            </div>
            <h3 class="empty-title">No results found</h3>
            <p class="empty-sub">Try searching for different keywords.</p>
          </div>
        </div>
      </main>
    </div>

    <script>
      // --- 1. DATA ---
      const INITIAL_FAQS = [
        {
          category: "Academics",
          questions: [
            {
              id: 1,
              q: "What is the minimum attendance required?",
              a: "As per university norms, a minimum of 75% attendance in each subject is mandatory to be eligible for exams.",
            },
            {
              id: 2,
              q: "How can I apply for a bonafide certificate?",
              a: "Apply through the Student Portal under 'Services'. Collect from Admin Block, Counter 4 after 2 days.",
            },
            {
              id: 3,
              q: "Where can I find the academic calendar?",
              a: "The calendar is available on the college website and pinned on the Dean's notice board.",
            },
          ],
        },
        {
          category: "Campus Life",
          questions: [
            {
              id: 4,
              q: "What are the library timings?",
              a: "8:00 AM to 8:00 PM on weekdays. 9:00 AM to 5:00 PM on Saturdays. Closed on Sundays.",
            },
            {
              id: 5,
              q: "How do I register for college bus service?",
              a: "Submit the registration form at the Transport Office (Block B) with a photo and ID copy.",
            },
            {
              id: 6,
              q: "Is there a dress code?",
              a: "Smart casuals are expected. Sleeveless tops and shorts are generally discouraged in academic blocks.",
            },
          ],
        },
        {
          category: "Technical & WiFi",
          questions: [
            {
              id: 7,
              q: "How do I connect to campus WiFi?",
              a: "Network: 'Campus-Student'. Username: Roll Number. Password: DOB (DDMMYYYY).",
            },
            {
              id: 8,
              q: "Lost ID card procedure?",
              a: "Report to Security immediately. Apply for a duplicate at the Admin Block (Fine: â‚¹200).",
            },
          ],
        },
      ];

      let state = { searchQuery: "", openItems: {} };

      // --- 2. FIREBASE & SIDEBAR LOGIC ---
      const firebaseConfig = {
        apiKey: "AIzaSyDCOT7bvPnU4zhOAkOG_nFxSLP0f58itgo",
        authDomain: "veddit-a03a0.firebaseapp.com",
        projectId: "veddit-a03a0",
        storageBucket: "veddit-a03a0.firebasestorage.app",
        messagingSenderId: "841975514674",
        appId: "1:841975514674:web:3dcea2a6931cde3bfcde2b",
        measurementId: "G-73VBEQ32GT",
      };

      try {
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        auth.onAuthStateChanged((user) => {
          const navName = document.getElementById("nav-user-name");
          const topName = document.getElementById("top-bar-name");

          if (user) {
            db.collection("users")
              .doc(user.uid)
              .get()
              .then((doc) => {
                if (doc.exists) {
                  const name =
                    doc.data().fullName || doc.data().username || "My Profile";
                  navName.innerText = name;
                  if (topName) topName.innerText = name;
                }
              });
          } else {
            navName.innerText = "Guest";
            if (topName) topName.innerText = "Guest";
          }
        });
      } catch (e) {
        console.error("Firebase Error:", e);
      }

      // --- 3. RENDER LOGIC ---
      function renderApp() {
        const container = document.getElementById("faq-list");
        const emptyState = document.getElementById("empty-state");
        container.innerHTML = "";

        const query = state.searchQuery.toLowerCase();
        const filteredData = INITIAL_FAQS.map((cat) => {
          const filteredQs = cat.questions.filter(
            (q) =>
              q.q.toLowerCase().includes(query) ||
              q.a.toLowerCase().includes(query)
          );
          return { ...cat, questions: filteredQs };
        }).filter((cat) => cat.questions.length > 0);

        if (filteredData.length === 0) {
          container.classList.add("hidden");
          emptyState.classList.remove("hidden");
        } else {
          container.classList.remove("hidden");
          emptyState.classList.add("hidden");

          filteredData.forEach((cat) => {
            const card = document.createElement("div");
            card.className = "faq-card";

            const headerHtml = `
                        <div class="faq-header">
                            <i data-lucide="file-text" class="faq-icon"></i>
                            <h3 class="faq-cat-title">${cat.category}</h3>
                        </div>`;

            const questionsContainer = document.createElement("div");

            cat.questions.forEach((item) => {
              const isOpen = !!state.openItems[item.id];
              const qItem = document.createElement("div");
              qItem.className = `faq-item ${isOpen ? "active" : ""}`;

              qItem.innerHTML = `
                            <button onclick="toggleItem(${item.id})" class="faq-btn">
                                <span class="q-text">${item.q}</span>
                                <i data-lucide="chevron-down" class="q-chevron"></i>
                            </button>
                            <div class="faq-content">
                                <p class="a-text">${item.a}</p>
                            </div>
                        `;
              questionsContainer.appendChild(qItem);
            });

            card.innerHTML = headerHtml;
            card.appendChild(questionsContainer);
            container.appendChild(card);
          });
        }
        lucide.createIcons();
      }

      window.toggleItem = function (id) {
        state.openItems[id] = !state.openItems[id];
        renderApp();
      };

      document.getElementById("search-input").addEventListener("input", (e) => {
        state.searchQuery = e.target.value;
        renderApp();
      });

      document.addEventListener("DOMContentLoaded", renderApp);
    </script>
    
  </body>

</html>
